(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,n,t){},160:function(e,n,t){"use strict";t.r(n),n.default=t.p+"static/media/example-clicking.f7137e63.gif"},163:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(13),o=t(0),c=t(21),i=t.n(c),s=(t(150),t(23)),d=t(11),l=t(35),u=t(20),b=t(10);function p(){var e=Object(d.a)(["\n  mutation loginUser($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return p=function(){return e},e}function j(){var e=Object(d.a)(["\n  mutation createUser($username: String!, $password: String!) {\n    createUser(username: $username, password: $password) {\n      user {\n        id\n      }\n    }\n  }\n"]);return j=function(){return e},e}function m(){var e=Object(d.a)(["\n  query getUser($id: ID!) {\n    user(id: $id) {\n      id\n      username\n      poemsWrittenCount\n      dateJoined\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=Object(d.a)(["\n  query getCurrentUser {\n    current {\n      id\n      username\n    }\n  }\n"]);return g=function(){return e},e}function h(){var e=Object(d.a)(["\n  mutation deletePoem($id: ID!) {\n    deletePoem(id: $id) {\n      id\n    }\n  }\n"]);return h=function(){return e},e}function x(){var e=Object(d.a)(["\n  mutation updatePoem(\n    $textChunks: [InputTextChunkType]!\n    $id: ID!\n    $backgroundId: Int\n    $colorRange: Int\n  ) {\n    updatePoem(\n      textChunks: $textChunks\n      id: $id\n      backgroundId: $backgroundId\n      colorRange: $colorRange\n    ) {\n      poem {\n        ...PoemDetails\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function f(){var e=Object(d.a)(["\n  mutation createPoem(\n    $textChunks: [InputTextChunkType]!\n    $bookId: ID!\n    $startIdx: Int\n  ) {\n    createPoem(textChunks: $textChunks, bookId: $bookId, startIdx: $startIdx) {\n      poem {\n        ...PoemDetails\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function v(){var e=Object(d.a)(["\n  query getPoemsByAuthor($authorId: ID, $offset: Int, $limit: Int) {\n    poemPages(authorId: $authorId, offset: $offset, limit: $limit) {\n      edges {\n        ...PoemDetails\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function O(){var e=Object(d.a)(["\n  query getPoems($offset: Int, $limit: Int) {\n    poemPages(offset: $offset, limit: $limit) {\n      edges {\n        ...PoemDetails\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function k(){var e=Object(d.a)(["\n  query getSinglePoem($id: ID!) {\n    poem(id: $id) {\n      ...PoemDetails\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function y(){var e=Object(d.a)(["\n  query getRandomBook {\n    randomBook {\n      id\n      title\n      text\n      startIdx\n    }\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(d.a)(["\n  fragment PoemDetails on PoemType {\n    id\n    backgroundId\n    colorRange\n    createdAt\n    updatedAt\n    author {\n      id\n      username\n    }\n    book {\n      id\n      title\n    }\n    textChunks {\n      text\n      isSelected\n    }\n  }\n"]);return w=function(){return e},e}var I=Object(b.gql)(w()),C=Object(b.gql)(y());var S=Object(b.gql)(k(),I);function P(e){return b.useQuery(S,e)}var N=Object(b.gql)(O(),I);var z=Object(b.gql)(v(),I);var L=Object(b.gql)(f(),I);var M=Object(b.gql)(x(),I);var D=Object(b.gql)(h());var U=Object(b.gql)(g());function B(e){return b.useQuery(U,e)}var $=Object(b.gql)(m());var W=Object(b.gql)(j());var R=Object(b.gql)(p());var q=t(46),Z=t(190);function A(e){var n=e.cache,t=e.arg,r=e.updateData,o=n.readQuery(t);if(o){var c=r(o);n.writeQuery(Object(a.a)(Object(a.a)({},t),{},{data:c}))}}function H(e){var n,t,a=e.authorId,o=e.poemId,c=B().data,i=(null===c||void 0===c||null===(n=c.current)||void 0===n?void 0:n.id)===a,s=(t={variables:{id:o},update:function(e,n){var t=n.data.deletePoem.id,r=function(e){return Object(q.a)(e,(function(e){var n=e.poemPages.edges.findIndex((function(e){return e.id===t}));e.poemPages.edges.splice(n,1)}))};A({cache:e,arg:{query:N,variables:{limit:10}},updateData:r}),A({cache:e,arg:{query:z,variables:{limit:10,authorId:a}},updateData:r})}},b.useMutation(D,t)),d=Object(l.a)(s,1)[0];return Object(r.jsx)("span",{className:"delete-edit-links",children:i&&Object(r.jsxs)("span",{children:[Object(r.jsx)(Z.a,{onClick:function(){return window.confirm("Are you sure you want to delete your poem?")&&d()},children:"delete"})," / ",Object(r.jsx)(u.b,{to:"/edit/write/".concat(o),children:"edit"})]})})}var T=t(22),E=5,_=15,J=250,K=1200,Q=16,V=26,G=120,F="425px",X="768px",Y="#bbb",ee="#333",ne="#e0e0e0",te="#757575",re="#212121";function ae(){var e=Object(d.a)(["\n  width: ","px;\n  &.close-up {\n    width: ","px;\n  }\n  text-align: right;\n  position: relative;\n  z-index: 20;\n  background: black;\n\n  .delete-edit-links {\n    float: left;\n  }\n"]);return ae=function(){return e},e}var oe=T.a.div(ae(),J,2*J);function ce(e){var n=e.authorId,t=e.poemId;return Object(r.jsxs)(oe,{className:"poem-header",children:[Object(r.jsx)(H,Object(a.a)({},{authorId:n,poemId:t})),t&&Object(r.jsx)(u.b,{to:"/poem/".concat(t),"data-cy":"view-close-up-poem",children:"view"})]})}var ie=t.p+"static/media/paper-rect-contrast.e66685ca.jpg",se=t.p+"static/media/tree-bark.32958e04.jpg",de=t.p+"static/media/contemporary_china_small.de76a51e.png",le=t.p+"static/media/f0c4457.f1a0d7a4.jpg",ue=t.p+"static/media/maxresdefault.4be2421c.jpg",be=t.p+"static/media/blueTile.b092c647.jpg",pe=t.p+"static/media/life_original_wild_urban_shells_abstract_texture_love-572258.16701eac.jpg",je=t.p+"static/media/paintingCracks.aef5b50c.jpg",me=t.p+"static/media/Alcala_lg.fae98355.jpg",ge=t.p+"static/media/map2.3c916e96.jpg",he=t.p+"static/media/paperInverted.60927562.jpg",xe=t.p+"static/media/paperContrast.d0935fda.jpg",fe=t.p+"static/media/triangles-123.3dd0203b.jpg",ve=t.p+"static/media/1_mU0yXR99Bg91S1ACSyPq_w.1960b2a2.jpg",Oe=t.p+"static/media/waves.1e03dd53.jpg",ke=t.p+"static/media/electronic.874e57d2.jpg";function ye(){var e=Object(d.a)(["\n  font-size: ","px;\n  ",";\n  &.close-up {\n    margin: auto;\n    display: block;\n    width: ","px;\n    font-size: ","px;\n    .background-img {\n      width: ","px;\n      height: ","px;\n    }\n    .poem-header, .poem-footer {\n      font-size: ","px;\n    }\n  }\n  .poem-header, .poem-text, .poem-footer {\n    padding-left: .5em;\n    padding-right: .5em;\n  }\n  .poem-header, .poem-footer {\n    width: 100%;\n    background: rgba(0, 0, 0, 0);\n    color: ",";\n    font-size: ","px;\n    a {\n      color: ",";\n      &:hover {\n        color: white;\n      }\n    }\n  }\n  width: ",'px;\n  margin: 1em;\n  display: inline-block;\n  vertical-align: text-top;\n  text-align: center;\n  position: relative; /* for absolute overflow styles */\n  overflow: hidden;\n\n  .background-img {\n    content: "";\n    background: url(',");\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    z-index: -10;\n    top: 0;\n    left: 0;\n  }\n\n  .is-selected {\n    position: relative; /* for zindex */\n    background: yellow;\n  }\n  .not-selected {\n    color: rgba(0, 0, 0, 0.2);\n  }\n\n  /* @include mobile {\n    width: 100%;\n  } */\n\n  &.style-1 {\n    .background-img {\n      background: url(",");\n    }\n    .not-selected {\n      color: rgba(0, 0, 0, 0.1);\n      text-shadow: "," 0 0 0.2em;\n    }\n    .is-selected {\n      text-shadow: black 1px 1px 1px;\n      background: none;\n    }\n  }\n\n  &.style-2 {\n    .background-img {\n      background: url(",");\n    }\n    .not-selected {\n      opacity: 0;\n    }\n    .is-selected {\n      background: none;\n    }\n  }\n\n  &.style-3 {\n    .background-img {\n      background: url(",');\n    }\n    .not-selected {\n      opacity: .2;\n    }\n    .is-selected {\n      background: none;\n      color: white;\n    }\n  }\n\n  &.style-4 {\n    background: white;\n    .is-selected {\n      background: pink;\n      &:before {\n        content: "";\n        position: absolute;\n        height: 1.2em;\n        width: 1000px;\n        border: .2em solid;\n        margin: -.1em;\n        margin-left: -.3em;\n        z-index: 11;\n      }\n    }\n  }\n\n  &.style-5 {\n    .background-img {\n      background: white;\n    }\n    .not-selected {\n      color: black;\n      border-top: solid 0.1em;\n      border-bottom: solid 0.1em;\n      text-decoration: line-through;\n    }\n    .is-selected {\n      background: white;\n      padding: ',"px ","px;\n      margin: ","px;\n      box-shadow: black 0.2em 0.2em 0;\n    }\n  }\n\n  &.style-6 {\n    .not-selected {\n      background: rgba(0,0,0, .75);\n    }\n    .is_selected {\n      background: white !important;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-7 {\n    .background-img {\n      background: url(",");\n      background-size: 20%;\n    }\n    .is-selected {\n      background: none !important;\n      text-shadow: black 0.05em 0.02em 0;\n    }\n  }\n\n  &.style-8 {\n    .background-img {\n      background: url(",");\n    }\n    .is-selected {\n      color: white;\n      background: red;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-9 {\n    .background-img {\n      background: url(",");\n      background-size: 100%;\n    }\n    .is-selected {\n      background: #3e144c;\n      color: #cccbbf;\n      padding: ","px ","px;\n      margin: ","px;\n      .text {\n        z-index: 10;\n        color: white;\n        position: relative;\n      }\n    }\n  }\n\n  &.style-10 {\n    .background-img {\n      background: url(",");\n      background-size: 100%;\n    }\n    .not-selected {\n      color: rgba(255, 255, 255, .2);\n    }\n    .is-selected {\n      background: none;\n      color: white;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-11 {\n    .background-img {\n      background: url(",");\n      background-size: 50%;\n\n    }\n    .is-selected {\n      background: #100000;\n      color: #cccbbf;\n      padding: ","px ","px;\n      margin: ","px;\n      .text {\n        z-index: 10;\n        color: white;\n        position: relative;\n      }\n    }\n  }\n\n  &.style-12 {\n    .background-img {\n      background: url(",");\n      background-size: 80%;\n    }\n    .not-selected {\n      color: rgba(0, 0, 0, 0);\n    }\n    .is-selected {\n      background: #0091ae;\n      color: #e7b8bc;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-13 {\n    .background-img {\n      background: url(",");\n      background-size: 120%;\n    }\n    .not-selected {\n      color: rgba(0, 0, 0, 0);\n    }\n    .is-selected {\n      background: none;\n      color: white;\n      padding: ","px ","px;\n      margin: ","px;\n      text-shadow: white 1px 1px 1px;\n    }\n  }\n\n  &.style-14 {\n    .background-img {\n      background: url(",");\n      background-size: 20%;\n    }\n    .not-selected {\n      color: rgba(0, 0, 0, 0);\n    }\n    .is-selected {\n      background: #37517a;\n      color: white;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-15 {\n    .background-img {\n      background: url(",");\n      background-size: 100%;\n    }\n    .is-selected {\n      background: #2c3c4e;\n      color: #cccbbf;\n      padding: ","px ","px;\n      margin: ","px;\n      .text {\n        z-index: 10;\n        color: white;\n        position: relative;\n      }\n    }\n  }\n\n  &.style-16 {\n    .background-img {\n      background: url(",");\n      background-repeat: repeat-y;\n      background-size: 100%;\n    }\n    .is-selected {\n      background: #f7ffa9;\n      color: #499991;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-17 {\n    .background-img {\n      background: url(",");\n      background-repeat: repeat-y;\n      background-size: 100%;\n    }\n    .is-selected {\n      background: #380b1c;\n      color: #d2d4d1;\n      padding: ","px ","px;\n      margin: ",'px;\n    }\n  }\n\n  &.style-18 {\n    .background-img {\n      background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAiIGhlaWdodD0iMzAiPgo8ZGVmcz4KPHJlY3QgaWQ9InIiIHdpZHRoPSIzMCIgaGVpZ2h0PSIxNSIgZmlsbD0iI2JiMDg1ZiIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZT0iIzdhMDU0ZCI+PC9yZWN0Pgo8ZyBpZD0icCI+Cjx1c2UgeGxpbms6aHJlZj0iI3IiPjwvdXNlPgo8dXNlIHk9IjE1IiB4bGluazpocmVmPSIjciI+PC91c2U+Cjx1c2UgeT0iMzAiIHhsaW5rOmhyZWY9IiNyIj48L3VzZT4KPHVzZSB5PSI0NSIgeGxpbms6aHJlZj0iI3IiPjwvdXNlPgo8L2c+CjwvZGVmcz4KPHVzZSB4bGluazpocmVmPSIjcCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtMjUpIHNrZXdZKDQwKSI+PC91c2U+Cjx1c2UgeGxpbms6aHJlZj0iI3AiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwIDApIHNrZXdZKC00MCkiPjwvdXNlPgo8L3N2Zz4=");\n      background-size: 100%;\n    }\n    .is-selected {\n      background: white;\n      color: black;\n      padding: ',"em ","em;\n      margin: ","em ","em;\n      .text {\n        z-index: 11;\n        position: relative;\n      }\n    }\n  }\n\n  &.style-19 {\n    .background-img {\n      background: url(",");\n      background-position-x: 60%;\n      background-position-y: 70%;\n    }\n    .is-selected {\n      background: black;\n      padding: 5px 15px;\n      margin: -15px;\n      color: #61c098;\n      padding: ","px ","px;\n      margin: ","px;\n    }\n  }\n\n  &.style-20 {\n  .background-img {\n    background: url(",");\n    background-size: 100%;\n  }\n  .not-selected {\n    color: rgba(0, 0, 0, 0);\n  }\n  .is-selected {\n    background: white;\n    color: #008308;\n    padding: 0 ","px;\n    margin: 0 ","px;\n  }\n"]);return ye=function(){return e},e}function we(){var e=Object(d.a)(['\n  line-height: 1em;\n  height: 30em; /* 30 lines */\n  overflow: hidden;\n  font-family: "Garamond", serif;\n  font-weight: 400;\n  padding-bottom: 0.3em;\n  padding-top: 1.5em;\n  padding-bottom: 1.5em;\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n']);return we=function(){return e},e}for(var Ie=T.a.div(we()),Ce="",Se=0;Se<36;)Se++,Ce+="\n    &.color-".concat(Se," .background-img, &.color-").concat(Se," .poem-text {\n      filter: hue-rotate(").concat(10*Se,"deg);\n    }\n  ");var Pe=T.a.div(ye(),Q-1,Ce,2*J,2*Q,2*J,2*K,1.5*Q,Y,Q,te,J-14,ie,J,K,xe,ne,xe,he,E,E,-E,E,_,-_,de,se,E,_,-_,je,E,_,-_,le,E,_,-_,Oe,E,_,-_,ve,E,_,-_,ue,E,_,-_,be,E,_,-_,pe,E,_,-_,fe,E,_,-_,me,E,_,-_,.1,.3,-.1,-.3,ge,E,_,-_,ke,E,-E),Ne=function(e){var n=e.isSelected,t=e.text;return Object(r.jsx)("span",{className:n?"is-selected":"not-selected",children:Object(r.jsx)("span",{className:"text",children:t})})};function ze(e){var n=e.textChunks;return Object(r.jsx)(Ie,{className:"poem-text",children:n&&n.map((function(e,n){return Object(r.jsx)(Ne,Object(a.a)({},e),n)}))})}var Le=function(e){var n=e.username,t=e.userId;return Object(r.jsx)("div",{className:"username","data-cy":"usernameLink",children:Object(r.jsx)(u.b,{to:"/user/".concat(t),children:n})})};function Me(e){var n=e.authorUsername,t=e.authorId;return Object(r.jsx)("div",{className:"poem-footer",children:Object(r.jsx)(Le,{userId:t,username:n})})}function De(){var e=Object(d.a)(['\n  display: inline-block;\n  width: 64px;\n  height: 64px;\n  &:after {\n    content: " ";\n    display: block;\n    width: 46px;\n    height: 46px;\n    margin: 1px;\n    border-radius: 50%;\n    border: 5px solid #fff;\n    border-color: #fff transparent #fff transparent;\n    animation: lds-dual-ring 1.2s linear infinite;\n  }\n  @keyframes lds-dual-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n']);return De=function(){return e},e}var Ue=T.a.div(De()),Be=t(56),$e=t(57),We=t(60),Re=t(59),qe=function(e){Object(We.a)(t,e);var n=Object(Re.a)(t);function t(e){var r;return Object(Be.a)(this,t),(r=n.call(this,e)).state={hasError:!1},r}return Object($e.a)(t,[{key:"componentDidCatch",value:function(e,n){console.warn(e,n)}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)("p",{style:{textAlign:"center",margin:50},children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.PureComponent);function Ze(e){var n=e.poem;if(!n)return Object(r.jsx)("div",{className:"poem",children:Object(r.jsx)(Ue,{})});var t=n.id,a=n.backgroundId,o=n.colorRange,c=n.textChunks,i=n.author;return i.id?Object(r.jsx)(qe,{children:Object(r.jsxs)(Pe,{className:"poem style-".concat(a," color-").concat(o," ").concat(e.closeUp?"close-up":""),"data-test":"poem".concat(t),"data-cy":"poem",children:[Object(r.jsx)("div",{className:"background-img"}),Object(r.jsx)(ce,{poemId:t,authorId:i.id}),Object(r.jsx)(ze,{textChunks:c}),Object(r.jsx)(Me,{authorUsername:i.username,authorId:i.id})]})}):null}function Ae(){var e=Object(d.a)(["\n  .close-up-poem-view {\n    text-align: center;\n    width: ",";\n    margin: auto;\n    text-align: center;\n    .poem {\n      margin: 0;\n      width: ",";\n    }\n  }\n  .help-image {\n    background: url(",");\n    width: 100px;\n    height: 100px;\n  }\n"]);return Ae=function(){return e},e}var He=t(160),Te=T.a.div(Ae(),2*J,2*J,He);function Ee(){var e=P({variables:{id:Object(s.h)().id}}).data;return(null===e||void 0===e?void 0:e.poem)?Object(r.jsx)(Te,{style:{marginTop:50},children:Object(r.jsx)(Ze,{poem:e.poem,closeUp:!0})}):Object(r.jsx)(Ue,{})}var _e=t(134),Je=t(129),Ke=t.n(Je);function Qe(){var e=Object(d.a)(["\n  margin: auto;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(","px, 1fr));\n  grid-gap: 10px;\n  > div {\n    text-align: center;\n    margin-left: -2rem;\n    margin-right: -2rem;\n  }\n"]);return Qe=function(){return e},e}function Ve(){var e=Object(d.a)(["\n  width: ","px;\n  height: 450px;\n  margin: 16px;\n  background: #ddd;\n  display: inline-block;\n"]);return Ve=function(){return e},e}T.a.div(Ve(),J);var Ge=T.a.div(Qe(),J);function Fe(e){var n=e.poems,t=e.fetchMore;return Object(r.jsx)(Ge,{children:Object(r.jsx)(Ke.a,{loadMore:function(e){return t({variables:{offset:10*e,limit:10},updateQuery:function(e,n){var t=n.fetchMoreResult;return Object(q.a)(e,(function(e){var n;(n=e.poemPages.edges).push.apply(n,Object(_e.a)(t.poemPages.edges))}))}})},hasMore:!(n.edges.length%10),loader:Object(r.jsx)(Ue,{}),children:n&&n.edges.map((function(e){return Object(r.jsx)(Ze,{poem:e},e.id)}))})})}function Xe(){var e,n=(e={variables:{limit:10}},b.useQuery(N,e)),t=n.data,o=n.fetchMore;return t?Object(r.jsxs)("div",{className:"index-view",children:[Object(r.jsx)("h5",{children:"Browse through all the communities poems!"}),Object(r.jsx)(Fe,Object(a.a)({},{poems:t.poemPages,fetchMore:o}))]}):Object(r.jsx)(Ue,{})}var Ye=t(130),en=t.n(Ye),nn=function(e){var n,t,a,o=e.id,c=(a={variables:{id:o}},b.useQuery($,a)).data,i=null===(n=B().data)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.id;if(!c)return Object(r.jsx)(Ue,{});var s=c.user,d=i===s.id?"you":"they",l=s&&s.poemsWrittenCount,u=s&&en()(s.dateJoined).fromNow();return Object(r.jsxs)("div",{className:"mx-3",children:[Object(r.jsx)("h1",{children:s&&s.username}),Object(r.jsxs)("div",{children:["Poems Written: ",Object(r.jsx)("strong",{children:l})]}),Object(r.jsxs)("div",{children:["Signed Up: ",Object(r.jsx)("strong",{children:u})]}),Object(r.jsxs)("h5",{children:["Look at all the lovely poems ",d," have written!"]})]})};function tn(e){var n,t=e.authorId,a=(n={variables:{authorId:t,limit:10}},b.useQuery(z,n)),o=a.data,c=a.fetchMore;return o?Object(r.jsx)(Fe,{poems:o.poemPages,fetchMore:c}):Object(r.jsx)(Ue,{})}function rn(){var e=Object(s.h)().id;return Object(r.jsxs)("div",{className:"index-view",children:[Object(r.jsx)(nn,{id:e}),Object(r.jsx)(tn,{authorId:e})]})}var an=function(){return Object(r.jsxs)("svg",{viewBox:"0 0 380.5 128.1",style:{minWidth:"5rem"},children:[Object(r.jsx)("path",{d:"M29.8,0c11.3,0,23,0.2,33.8,3.9c26.7,10.4,35.1,41,23,65.9C75.2,90.2,50.9,92.9,29.8,92.9h-23v31.8c0,4.5-6.7,4.6-6.7,0V3.5 C0,0.9,2.6,0,4.8,0H29.8z M6.7,6.5v79.9h24.7c17.6,0,38.6-2.2,49-18.4V68C87.9,54.8,88,35,78.9,22.5C68.7,8.4,49,6.5,33.1,6.5H6.7z"}),Object(r.jsx)("path",{d:"M114,69.3c28.2,0,28.1,43.6,0,43.6C86,112.8,85.8,69.3,114,69.3z M114,75.7c-19.9,0-19.8,30.6,0,30.7 C133.6,106.5,133.6,75.7,114,75.7z"}),Object(r.jsx)("path",{d:"M150.5,93.3c0.9,9.9,10.5,14.9,19.7,12.5c4.2-1.1,6.6-4.8,10.4-6.1c3.7-1.3,6.6,2.4,3.5,5.5c-8,8-21.6,10.7-31.3,4.1 c-9.1-6.1-11.2-19.7-6.3-29.1c5-9.5,17.2-13.7,27.1-9.5c4.9,2.1,9,6,11.2,10.9c1.5,3.4,3.9,11.7-2.1,11.7H150.5z M179.7,87 c-3.4-14.8-25.7-15.1-28.9-0.1L179.7,87z"}),Object(r.jsx)("path",{d:"M206.6,76.1c0,0.3,0,0.7-0.1,1c6.4-5.2,24-14.1,27.2-0.6c9.3-6.9,28.4-13.1,28.4,4.6v27.7c0,4.3-6.5,4.6-6.5,0V84.3 c0-3.9,0.1-7.9-4.5-8.6c-5.8-0.9-12.9,5.2-17.1,8.3v24.8c0,4.3-6.4,4.6-6.4,0v-23c0-4.1,0.2-9.6-5-10.1c-5.6-0.5-12.4,6.2-16.3,9.5 v23.6c0,4.3-6.4,4.6-6.4,0V72.7c0-1.8,1.3-3.6,3.3-3.4C206.5,69.6,206.6,73.7,206.6,76.1z"}),Object(r.jsx)("path",{d:"M284.8,39.7c6.5,0,6.5,10.2,0,10.2C278.2,49.9,278.3,39.7,284.8,39.7z M288,108.8c0,4.2-6.4,4.5-6.4,0V72.7 c0-4.3,6.4-4.6,6.4,0.1V108.8z"}),Object(r.jsx)("path",{d:"M311,105.3c6.9,2.6,16.4-2.8,6.8-7.6c-7.6-3.8-16.1-5.6-13.6-16.4c2-8.6,11.2-12.8,19.4-11.9c2.6,0.3,8.6,1.4,9.3,4.6 c0.7,3.6-2.8,4.2-5.5,3.1h0.1c-5.7-2.5-20.6-1-17.3,8.8c2.2,6.5,13.4,5.1,17.1,10.8c5.6,8.6-3.8,16.6-12.1,16.1 c-2.6-0.2-8.3-1-9.4-3.7c-1.2-3,2.4-6.5,5-3.9L311,105.3z"}),Object(r.jsx)("path",{d:"M356.4,95.5c0,8.2,5.1,14,13.5,9.5c2.4-1.3,4.9-5.7,7.5-5.8c3.1,0,4,3.6,2,5.6l0.1-0.1c-4.4,6.4-12.3,9.4-19.9,7.6 c-8.1-2-9.8-9.4-9.6-16.8l0.3-18.9h-10.2c-4.2,0-4.5-6.3,0-6.3h10.4l0.9-28.7c0.2-4.3,6.3-4.5,6.3,0L357,70.3h16 c4.1,0,4.4,6.3,0,6.3h-16.2C356.8,82.9,356.4,89.2,356.4,95.5z"})]})};function on(){var e=Object(d.a)(["\n  li {\n    display: inline-block;\n    margin: ","px;\n  }\n  text-align: right;\n  position: fixed;\n  top: 0;\n  z-index: 30;\n  background: ",";\n  color: ",";\n  width: 100%;\n  padding: ","px;\n  height: ","px;\n\n  a {\n    color: ",";\n  }\n\n  .active {\n    color: white;\n  }\n\n  .navbarMenu {\n    margin-bottom: 0;\n    padding-left: 0;\n    /* background: $dark-grey; */\n\n    /* @include mobile {\n        li {\n          display: block;\n        }\n      } */\n  }\n  .hamburger {\n    display: none;\n\n    /* @include mobile {\n        display: block;\n      } */\n  }\n\n  .hidden-xs {\n    /* @include mobile {\n        display: none;\n      } */\n  }\n\n  .logo {\n    float: left;\n    margin: ","px;\n    svg {\n      max-width: 13rem;\n      width: calc(100vw - 420px);\n      fill: ",";\n    }\n  }\n\n  @media (max-width: ",") {\n    .logo {\n      margin: 0;\n    }\n    .navbar {\n      padding: 0;\n    }\n  }\n  @media (max-width: ",") {\n    .logo {\n      margin: 0;\n    }\n    .navbar {\n      padding: 0;\n    }\n  }\n"]);return on=function(){return e},e}var cn=T.a.div(on(),_,ee,Y,_,G,Y,_,Y,F,X),sn=t(204),dn=t(195),ln=t(196),un=t(197),bn=t(202),pn=t(135),jn=t(198),mn=t(199),gn=t(36);function hn(){var e,n,t=Object(o.useState)({username:"",password:""}),c=Object(l.a)(t,2),i=c[0],d=c[1],p=(n={refetchQueries:[{query:U}]},b.useMutation(R,n)),j=Object(l.a)(p,2),m=j[0],g=j[1].error,h=function(e){return b.useMutation(W,e)}({refetchQueries:[{query:U}]}),x=Object(l.a)(h,2),f=x[0],v=x[1].error,O=Object(s.g)(),k=Object(s.f)(),y=function(){return k.push(k.location.pathname)},w=O.search.includes("showLogin"),I=O.search.includes("showSignUp");return Object(r.jsx)(sn.a,{open:w||I,onClose:y,children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=Promise.resolve();I&&(n=f({variables:i})),n.then((function(){return m({variables:i}).then((function(e){var n=e.data.tokenAuth.token;localStorage.setItem("token",n),window.setTimeout((function(){m({variables:i})}),100),y()}))})).catch((function(e){console.warn(e)}))},children:[Object(r.jsx)(dn.a,{children:Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)("div",{style:{flexGrow:1},children:w?"Login":"Sign Up"}),Object(r.jsx)(ln.a,{size:"small",onClick:y,children:Object(r.jsx)(gn.f,{})})]})}),Object(r.jsxs)(un.a,{children:[Object(r.jsx)(bn.a,{autoFocus:!0,margin:"dense",label:"Username",fullWidth:!0,value:i.username,onChange:function(e){return d((function(n){return Object(a.a)(Object(a.a)({},n),{},{username:e.target.value})}))}}),Object(r.jsx)(bn.a,{type:"password",margin:"dense",label:"Password",fullWidth:!0,value:i.password,onChange:function(e){return d((function(n){return Object(a.a)(Object(a.a)({},n),{},{password:e.target.value})}))}}),w?Object(r.jsx)(u.b,{to:"?showSignUp",component:Z.a,children:"Sign Up"}):Object(r.jsx)(u.b,{to:"?showLogin",component:Z.a,children:"Login"}),Object(r.jsxs)(pn.a,{color:"error",children:[(null===v||void 0===v||null===(e=v.message)||void 0===e?void 0:e.includes("UNIQUE"))?"Username already taken":null===v||void 0===v?void 0:v.message,null===g||void 0===g?void 0:g.message]})]}),Object(r.jsxs)(jn.a,{children:[Object(r.jsx)(mn.a,{onClick:y,children:"Cancel"}),Object(r.jsx)(mn.a,{color:"primary",variant:"contained",type:"submit",children:"Submit"})]})]})})}var xn=t(133),fn=t(205);function vn(e){var n=e.openLabel,t=void 0===n?"Select":n,a=e.items,c=void 0===a?[]:a,i=e.openStyle,s=void 0===i?{}:i,d=Object(o.useState)(null),u=Object(l.a)(d,2),b=u[0],p=u[1],j=function(){p(null)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(mn.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},style:s,children:t}),Object(r.jsx)(xn.a,{anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:j,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:c.map((function(e){return Object(r.jsx)(fn.a,{onClick:function(){var n;null===(n=e.onClick)||void 0===n||n.call(e),j()},children:e.label})}))})]})}var On=function(e){var n=e.toggleShowLogin;return Object(r.jsx)("span",{children:Object(r.jsx)("a",{onClick:n,"data-test":"signUpLink",children:"Sign Up"})})};function kn(){var e=Object(s.f)(),n=B().data,t=null===n||void 0===n?void 0:n.current;return Object(r.jsxs)("div",{className:"navbar",style:{display:"inline-block",minWidth:345,marginRight:"1rem"},children:[Object(r.jsx)("div",{}),Object(r.jsxs)("ul",{className:"navbarMenu expanded",children:[Object(r.jsx)("li",{children:Object(r.jsx)(u.c,{activeClassName:"active",exact:!0,to:"/",children:"Home"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.c,{activeClassName:"active",to:"/about",children:"About"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.c,{activeClassName:"active",to:"/new/write",children:"Create"})}),t&&Object(r.jsx)("li",{children:Object(r.jsxs)("span",{style:{display:"flex"},children:[Object(r.jsx)(u.c,{activeClassName:"active",to:"/user/".concat(t.id),"data-test":"profileLink",children:"Profile"}),Object(r.jsx)(vn,{openLabel:Object(r.jsx)(gn.a,{}),openStyle:{color:"white",display:"inline",minWidth:5,paddingTop:0},items:[{label:"Logout",onClick:function(){localStorage.clear(),window.location.reload()}}]})]})}),!t&&Object(r.jsx)("li",{children:Object(r.jsx)(On,{toggleShowLogin:function(){return e.push("?showLogin=true")}})})]})]})}function yn(){return Object(r.jsxs)(cn,{children:[Object(r.jsx)(u.c,{to:"/",className:"logo",children:Object(r.jsx)(an,{})}),Object(r.jsx)(kn,{}),Object(r.jsx)(hn,{})]})}function wn(){var e=Object(d.a)(["\n  @media (max-width: 550px) {\n    min-width: 550px;\n    .poem {\n      margin: 0.2em;\n    }\n    /* .close-up-poem-view {\n      min-width: 550px;\n    } */\n  }\n  .app {\n    font-size: ",';\n    font-family: "Avenir Next", sans-serif;\n  }\n\n  .page-body {\n    padding: ',"px;\n    margin-top: ","px;\n    text-align: center;\n  }\n\n  .index-view {\n    text-align: left;\n  }\n\n  .error {\n    color: red;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    text-align: center;\n  }\n\n  a:hover {\n    cursor: pointer;\n  }\n"]);return wn=function(){return e},e}var In=T.a.div(wn(),Q,_,G);function Cn(e){var n=e.children;return Object(r.jsxs)(In,{children:[Object(r.jsx)(yn,{}),Object(r.jsx)(qe,{children:Object(r.jsx)("div",{className:"page-body",children:n})})]})}function Sn(){var e=Object(d.a)(["\n  text-align: left;\n  max-width: 800px;\n  margin: auto;\n"]);return Sn=function(){return e},e}var Pn=T.a.div(Sn());function Nn(){return Object(r.jsxs)(Pn,{className:"about",children:[Object(r.jsx)("h1",{children:"About"}),Object(r.jsx)("p",{children:Object(r.jsxs)("i",{children:["A ",Object(r.jsx)("strong",{children:"found poem"})," is a poem that is composed with words and phrases from another text."]})}),Object(r.jsxs)("section",{children:[Object(r.jsx)("p",{children:"It may seem limiting to choose words only from a prearranged set, but limitations are one of the best drives of creativity."}),Object(r.jsx)("p",{children:"For the sake of this website there are a set of very specific constraints on each poem."}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"You will recieve exactly 40 lines of text"}),Object(r.jsx)("li",{children:"You may select any words or letters from this text to create your poem"}),Object(r.jsx)("li",{children:"You cannot rearrange them"})]}),Object(r.jsx)("p",{children:"The poems are meant to be a fun exercise not a throughout masterpiece, so don't spend too much time on each one. Churn out a few and discover moments of accidental brilliance and insight, or simply silliness. Take the stress and pressure out of writing and just have fun!"}),Object(r.jsx)("h4",{children:"Contact"}),Object(r.jsx)("p",{children:"We would love to hear from you!"}),Object(r.jsx)("p",{children:"Direct any comments or questions to poemistnet@gmail.com."})]})]})}var zn=t(91),Ln=t(58);var Mn=function(e){var n=Object(Ln.flatten)(e),t=!1,r=[],a="";return n.forEach((function(e){e.isSelected!==t?(a&&r.push({text:a,isSelected:t}),a=e.ch,t=!t):a+=e.ch})),a&&r.push({text:a,isSelected:t}),r};function Dn(e){var n=e.poem,t=e.children,a=Object(s.f)(),o=B().data,c=null===o||void 0===o?void 0:o.current,i=n.id,d=n.textChunks,u=n.backgroundId,p=n.colorRange,j=n.book,m=n.startIdx,g=null===j||void 0===j?void 0:j.id;d=n.wordLetters?Mn(n.wordLetters):d.map((function(e){e.__typename;return Object(zn.a)(e,["__typename"])}));var h,x=(h={variables:{id:i,textChunks:d,backgroundId:u,colorRange:p}},b.useMutation(M,h)),f=Object(l.a)(x,1)[0],v=function(e){return b.useMutation(L,e)}({variables:{textChunks:d,bookId:g,startIdx:m},update:function(e,n){var t=function(e){return Object(q.a)(e,(function(e){e.poemPages.edges.unshift(n.data.createPoem.poem)}))};A({cache:e,arg:{query:N,variables:{limit:10}},updateData:t}),A({cache:e,arg:{query:z,variables:{limit:10,authorId:c.id}},updateData:t})}}),O=Object(l.a)(v,1)[0],k=i?f:O;return c||(k=function(){return a.push("?showSignUp=true"),Promise.reject()}),Object(r.jsx)(r.Fragment,{children:t({savePoem:k})})}function Un(){var e=Object(d.a)(["\n  text-align: left;\n  position: fixed;\n  left: calc(50vw + ","px);\n  top: 18rem;\n  width: 170px;\n  @media (max-width: ",") {\n    width: 100vw;\n    left: 0;\n    bottom: 0;\n    top: auto;\n    z-index: 10;\n    display: flex;\n    z-index: 10;\n    .toolbar-tab {\n      display: inline-block;\n      width: 50%;\n      border: "," solid !important;\n      font-size: ","px !important;\n      margin: 0 !important;\n    }\n    .lower {\n      font-size: ","px !important;\n    }\n  }\n  @media (max-width: 550px) {\n    left: 0;\n    width: 100%;\n  }\n\n  .toolbar {\n    margin-left: ","px;\n    margin-top: ","px;\n    font-size: ","px;\n  }\n\n  .toolbar-tab {\n    font-size: ","px;\n    background: #333;\n    color: white;\n    margin: ","px 0;\n    text-align: left;\n    border: none;\n    cursor: pointer;\n\n    &-lg {\n      font-size: ","px;\n    }\n\n    button {\n      background: black;\n      color: white;\n      border: none;\n    }\n  }\n  button[disabled] {\n    background: #aaa;\n  }\n  .arrow-btn {\n    font-size: 2em !important;\n    cursor: pointer;\n  }\n  .text {\n    display: inline-block;\n    padding: 0.5em;\n  }\n"]);return Un=function(){return e},e}var Bn=T.a.div(Un(),J,X,re,1.5*Q,2*Q,2*J,3*_,V,Q,E,V);function $n(e){var n=e.num,t=e.upperlimit;return n<0?t-1:n>t?n-t:n}var Wn=function(e){Object(We.a)(t,e);var n=Object(Re.a)(t);function t(){var e;Object(Be.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).backgroundUp=function(){var n=$n({num:e.props.poem.backgroundId+1,upperlimit:20});e.props.updateStyle({backgroundId:n})},e.backgroundDown=function(){var n=$n({num:e.props.poem.backgroundId-1,upperlimit:20});e.props.updateStyle({backgroundId:n})},e.colorUp=function(){var n=$n({num:e.props.poem.colorRange+1,upperlimit:36});e.props.updateStyle({colorRange:n})},e.colorDown=function(){var n=$n({num:e.props.poem.colorRange-1,upperlimit:36});e.props.updateStyle({colorRange:n})},e}return Object($e.a)(t,[{key:"render",value:function(){var e=this,n=this.props.poem,t="/edit/write/".concat(n.id);return Object(r.jsxs)(Bn,{className:"style-toolbar toolbar",children:[Object(r.jsxs)("div",{className:"toolbar-tab",children:[Object(r.jsx)("button",{onClick:this.backgroundDown,className:"arrow-btn","data-ux":"background-id-down",children:Object(r.jsx)(gn.b,{})}),Object(r.jsxs)("span",{className:"text",children:["Style ",n.backgroundId]}),Object(r.jsx)("button",{onClick:this.backgroundUp,className:"arrow-btn","data-ux":"background-id-up",style:{float:"right"},children:Object(r.jsx)(gn.c,{})})]}),Object(r.jsxs)("div",{className:"toolbar-tab",children:[Object(r.jsx)("button",{onClick:this.colorDown,className:"arrow-btn","data-ux":"color-range-down",children:Object(r.jsx)(gn.b,{})}),Object(r.jsxs)("span",{className:"text",children:["Color ",n.colorRange]}),Object(r.jsx)("button",{onClick:this.colorUp,className:"arrow-btn","data-ux":"color-range-up",style:{float:"right"},children:Object(r.jsx)(gn.c,{})})]}),Object(r.jsx)("div",{className:"toolbar-tab lower",onClick:function(){e.props.history.push(t)},children:Object(r.jsxs)("span",{className:"text",children:[Object(r.jsx)(gn.d,{})," Back"]})}),Object(r.jsx)(Dn,{poem:n,children:function(n){var t=n.savePoem;return Object(r.jsx)("button",{onClick:function(){t().then((function(){e.props.history.push("/")}))},className:"toolbar-tab toolbar-tab-lg lower","data-test":"saveLink",children:Object(r.jsxs)("span",{className:"text",children:["Finish ",Object(r.jsx)(gn.e,{})]})})}})]})}}]),t}(o.PureComponent),Rn=Object(s.i)(Wn);function qn(){var e=P({variables:{id:Object(s.h)().id}}).data,n=Object(o.useState)(null===e||void 0===e?void 0:e.poem),t=Object(l.a)(n,2),c=t[0],i=t[1];if(Object(o.useEffect)((function(){i(null===e||void 0===e?void 0:e.poem)}),[null===e||void 0===e?void 0:e.poem]),!c)return Object(r.jsx)(Ue,{});return Object(r.jsxs)("div",{className:"close-up-poem-view text-center",children:[Object(r.jsx)("h1",{children:"Stylize"}),Object(r.jsx)(Rn,Object(a.a)({},{poem:c,updateStyle:function(e){var n=e.backgroundId,t=e.colorRange;n&&i(Object(a.a)(Object(a.a)({},c),{},{backgroundId:n})),t&&i(Object(a.a)(Object(a.a)({},c),{},{colorRange:t}))}})),Object(r.jsx)(Ze,{poem:c,closeUp:!0})]})}var Zn=function(e){var n=e.textChunks,t=e.passage;if(t)n=[{text:t,isSelected:!1}];else if(!n)return[];var r,a=[];return n.forEach((function(e){var n=function(e){var n=[],t="";return e.split("").forEach((function(e){t+=e," "!==e&&"-"!==e||(n.push(t),t="")})),n.push(t),n}(e.text).map((function(n){return Object(Ln.map)(n,(function(n){return{ch:n,isSelected:e.isSelected}}))}));a=r===e.isSelected?a[a.length-1].concat(n):a.concat(n),r=e.isSelected})),a};var An=function(e){var n=e.wordLetters,t=e.wordIdx,r=e.letterIdx,a=e.isSelectingByWord;return Object(q.a)(n,(function(e){if(a){if(!e[t])return console.warn("Word out of range, tried to access ".concat(t," of ").concat(e.flatMap.length)),e;var n=!e[t][r].isSelected;return e[t].forEach((function(e){e.isSelected=n})),e}return e[t][r].isSelected=!e[t][r].isSelected,e}))};var Hn=function(e){var n=e.handleClear,t=e.getNewPassage,a=e.toggleSelectBy,o=e.toggleRandomLetters,c=e.selectablePoem,i=(Object(zn.a)(e,["handleClear","getNewPassage","toggleSelectBy","toggleRandomLetters","selectablePoem"]),Object(s.f)()),d=c.wordLetters.every((function(e){return e.every((function(e){return!e.isSelected}))}));return Object(r.jsxs)(Bn,{className:"writer-toolbar toolbar",children:[Object(r.jsx)("button",{className:"toolbar-tab",onClick:a,"data-ux":"toggle-select-by",children:Object(r.jsx)("span",{className:"text",children:c.isSelectingByWord?"select by letter?":"select by word?"})}),!c.id&&Object(r.jsx)("button",{className:"toolbar-tab",onClick:function(){return t()},"data-ux":"get-new-passage",children:Object(r.jsx)("span",{className:"text",children:"new passage?"})}),!c.id&&Object(r.jsx)("button",{className:"toolbar-tab",onClick:d?o:n,"data-ux":"get-new-passage",children:Object(r.jsx)("span",{className:"text",children:d?"nudge":"clear"})}),Object(r.jsx)(Dn,{poem:c,children:function(e){var n=e.savePoem;return Object(r.jsxs)("button",{onClick:function(){return n().then((function(e){var n=(e.data.updatePoem||e.data.createPoem).poem.id;i.push("/edit/stylize/".concat(n))}))},className:"toolbar-tab toolbar-tab-lg","data-test":"styleLink",children:[Object(r.jsx)("span",{className:"text",children:"Next"})," ",Object(r.jsx)(gn.e,{})]})}})]})},Tn=function(e){var n=e.isSelected,t=e.ch,a=e.letterIdx,o=e.handleClickLetter;return Object(r.jsx)("span",{className:"letter ".concat(n?"is":"not","-selected"),"data-idx":a,onClick:o,children:t})},En=function(e){var n=e.word,t=e.wordIdx,o=e.handleClickLetter;return Object(r.jsx)("span",{className:"word","data-word-idx":t,children:n.map((function(e,n){var c=e.ch,i=e.isSelected;return Object(r.jsx)(Tn,Object(a.a)(Object(a.a)({},{ch:c,isSelected:i,letterIdx:n}),{},{handleClickLetter:function(){return o({wordIdx:t,letterIdx:n})}}),"".concat(t).concat(n))}))})};function _n(){var e=Object(d.a)(["\n  user-select: none;\n  .letter {\n    cursor: pointer;\n  }\n\n  .selecting-by-word .word:hover .letter,\n  .selecting-by-letter .letter:hover {\n    /* background: rgba(255, 255, 0, .7); */\n    color: cyan;\n    &.is-selected {\n      color: red;\n    }\n  }\n"]);return _n=function(){return e},e}var Jn=T.a.div(_n());function Kn(e){var n=e.wordLetters,t=e.isSelectingByWord,a=e.handleClickLetter;return Object(r.jsx)(Pe,{className:"poem close-up",children:Object(r.jsx)(Jn,{children:Object(r.jsxs)(Ie,{className:"poem-body",children:[Object(r.jsx)("div",{className:"background-img"}),Object(r.jsx)("div",{className:t?"selecting-by-word":"selecting-by-letter",children:n.map((function(e,n){return Object(r.jsx)(En,{word:e,wordIdx:n,handleClickLetter:a},n)}))})]})})})}var Qn=function(e){Object(We.a)(t,e);var n=Object(Re.a)(t);function t(){var e;Object(Be.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state=e.props.selectablePoem,e.onKeyDown=function(n){"Shift"===n.key&&e.setState({isSelectingByWord:!1})},e.onKeyUp=function(n){"Shift"===n.key&&e.setState({isSelectingByWord:!0})},e.handleClickLetter=function(n){var t=n.wordIdx,r=n.letterIdx,a=e.state,o=a.wordLetters,c=a.isSelectingByWord,i=An({wordLetters:o,wordIdx:t,letterIdx:r,isSelectingByWord:c});e.setState({wordLetters:i})},e.handleClear=function(){e.setState(e.props.selectablePoem)},e.toggleSelectBy=function(){e.setState({isSelectingByWord:!e.state.isSelectingByWord})},e.toggleRandomLetters=function(){for(var n=0,t=e.state.wordLetters;n<10;)n++,t=An({wordLetters:t,wordIdx:Object(Ln.random)(0,100),letterIdx:0,isSelectingByWord:!0});e.setState({wordLetters:t})},e}return Object($e.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("keyup",this.onKeyUp,!1)}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"close-up-poem-view text-center",onKeyPress:function(n){n.shiftKey&&e.toggleSelectBy()},children:[Object(r.jsx)("h1",{children:this.props.selectablePoem.id?"Edit":"Write"}),Object(r.jsx)("h5",{children:"Make your own poem by clicking on words!"}),Object(r.jsx)(Hn,{selectablePoem:this.state,getNewPassage:this.props.getNewPassage,handleClear:this.handleClear,toggleSelectBy:this.toggleSelectBy,toggleRandomLetters:this.toggleRandomLetters}),Object(r.jsx)(Kn,Object(a.a)(Object(a.a)({},this.state),{},{wordLetters:this.state.wordLetters,handleClickLetter:this.handleClickLetter}))]})}}],[{key:"getDerivedStateFromProps",value:function(e,n){return e.selectablePoem.book.id!==n.book.id?e.selectablePoem:n}}]),t}(o.PureComponent);function Vn(){var e,n,t=Object(s.h)().id,o=P({variables:{id:t},skip:!t}).data,c=b.useQuery(C,n),i=null===(e=B().data)||void 0===e?void 0:e.current;if(!c.data)return Object(r.jsx)(Ue,{});var d=Object(a.a)(Object(a.a)({book:{id:c.data.randomBook.id,title:c.data.randomBook.title},startIdx:c.data.randomBook.startIdx,author:i},function(e){var n=Zn({textChunks:e.textChunks});return Object(a.a)(Object(a.a)({},e),{},{wordLetters:n,isSelectingByWord:!0})}({textChunks:(null===o||void 0===o?void 0:o.poem.textChunks)||[{text:c.data.randomBook.text,isSelected:!1}]})),(null===o||void 0===o?void 0:o.poem)||{}),l=c.refetch;return Object(r.jsx)(Qn,Object(a.a)({},{selectablePoem:d,getNewPassage:l}))}var Gn=function(){return Object(r.jsx)(Cn,{children:Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{path:"/",exact:!0,component:Xe}),Object(r.jsx)(s.a,{path:"/about",component:Nn}),Object(r.jsx)(s.a,{path:"/edit/stylize/:id",component:qn}),Object(r.jsx)(s.a,{path:"/new/write",component:Vn}),Object(r.jsx)(s.a,{path:"/edit/write/:id",component:Vn}),Object(r.jsx)(s.a,{path:"/poem/:id",component:Ee}),Object(r.jsx)(s.a,{path:"/user/:id",component:rn})]})})},Fn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,207)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),o(e),c(e)}))},Xn=t(131),Yn=t(201),et=t(132),nt=t(200),tt=Object(b.createHttpLink)({uri:"https://poemist-django.herokuapp.com/graphql"}),rt=Object(Xn.a)((function(e,n){var t=n.headers,r=localStorage.getItem("token");return{headers:Object(a.a)(Object(a.a)({},t),{},{Authorization:r?"JWT ".concat(r):""})}})),at=new b.ApolloClient({link:rt.concat(tt),cache:new b.InMemoryCache({})}),ot=Object(et.a)({palette:{primary:{main:"#333"}},props:{MuiButtonBase:{disableRipple:!0}},shape:{borderRadius:0},typography:{button:{textTransform:"none"}}});i.a.render(Object(r.jsx)(o.StrictMode,{children:Object(r.jsx)(qe,{children:Object(r.jsx)(b.ApolloProvider,{client:at,children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(nt.a,{theme:ot,children:[Object(r.jsx)(Yn.a,{}),Object(r.jsx)(Gn,{})]})})})})}),document.getElementById("root")),Fn()}},[[163,1,2]]]);
//# sourceMappingURL=main.4bcd14ef.chunk.js.map